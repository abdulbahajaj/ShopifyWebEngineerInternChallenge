(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(66)},29:function(e,t,a){},31:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},32:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(20),r=a.n(i),c=(a(29),a(3)),o=a(4),u=a(7),l=a(5),d=a(6),m=a(1),h=(a(31),a(32),a(21)),p=a.n(h),v=a(22),f="setData",b="fav",y=Object(v.a)(function(e,t){switch(t.type){case f:var a=0;e.data=t.data,e.data.map(function(e){e.faved=!1,e.id=a,a+=1});break;case b:e.data[t.id].faved=!e.data[t.id].faved}return console.log(e),e},{data:[]}),O={setData:function(e){var t={};t.type=f,t.data=e,y.dispatch(t)},search:function(e){var t=y.getState().data,a=[];return e=(e=e.toLowerCase()).split(" "),t.map(function(t){for(var n in e){var s=e[n];-1!=t.keywords.indexOf(s)&&a.push(t)}}),a},toggleFav:function(e){var t={};t.type=b,t.id=e,y.dispatch(t)},subscribe:function(e){y.subscribe(e)}};p()({method:"get",url:"https://secure.toronto.ca/cc_sr_v1/data/swm_waste_wizard_APR?limit=1000"}).then(function(e){O.setData(e.data),O.search("tag rubber")});var j=O,g=a(54),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).fav=a.fav.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"fav",value:function(){j.toggleFav(this.props.item.id)}},{key:"render",value:function(){var e=this.props.item.body;e=g(e),console.log(this.props.item.faved);var t="";return this.props.item.faved&&(t+="fav"),s.a.createElement("div",{className:"Result"},s.a.createElement("div",{className:"title"},s.a.createElement("i",{onClick:this.fav,className:"fas fa-star star "+t}),this.props.item.title),s.a.createElement("div",{className:"description"},s.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})))}}]),t}(n.Component),E=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=[],t=[];return this.props.display.map(function(a){a.faved?e.push(s.a.createElement(k,{key:a.id,item:a})):t.push(s.a.createElement(k,{key:a.id,item:a}))}),s.a.createElement("div",{className:"Results"},t,s.a.createElement("div",{className:"favs"},s.a.createElement("div",{className:"sectionTitle"},"Favourites"),e))}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).query=a.query.bind(Object(m.a)(Object(m.a)(a))),a.state={results:[],keyword:""},a.submit=a.submit.bind(Object(m.a)(Object(m.a)(a))),a.handleInputChange=a.handleInputChange.bind(Object(m.a)(Object(m.a)(a))),a.update=a.update.bind(Object(m.a)(Object(m.a)(a))),j.subscribe(a.update),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"update",value:function(){this.forceUpdate(),console.log("updating")}},{key:"handleInputChange",value:function(e){var t=e.target.value;this.state.keyword=t,""==t&&this.setState({results:[]})}},{key:"query",value:function(e){var t=j.search(this.state.keyword);this.setState({results:t})}},{key:"submit",value:function(e){e.preventDefault(),this.query()}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"header"},"Toronto Waste Lookup"),s.a.createElement("div",{className:"body"},s.a.createElement("div",{className:"searchWrapper"},s.a.createElement("form",{onSubmit:this.submit},s.a.createElement("input",{type:"text",className:"text",onEnter:this.onEnter,onChange:this.handleInputChange}),s.a.createElement("i",{className:"searchButton fas fa-search",onClick:this.query}))),s.a.createElement(E,{display:this.state.results})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,2,1]]]);
//# sourceMappingURL=main.ea2ed78c.chunk.js.map